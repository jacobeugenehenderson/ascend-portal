/* =========================================
 * CopyDesk – module styles
 * - two-lane grid
 * - committed list visuals
 * - card rails + empty slots
 * - delete-row crosshatch
 *
 * Note: style-* text classes are injected from the spreadsheet (authoritative).
 * Keep CopyDesk layout here; keep injected typography/color out of these files.
 * ======================================= */

/* =========================================
 * CopyDesk – module styles
 * (Legacy job header/meta/countdown/segments removed: Copydesk lives inside Ascend shell.)
 * ======================================= */

/* NOTE: #job-name / #job-meta / #job-urgency render inside the Ascend header.
   Do not style them here; keep CopyDesk-only layout/visuals in this file. */

.empty-state {
  font-size: 0.9rem;
  color: var(--ascend-app-text-muted);
  padding: 1rem 0;
}

/* style-* classes are injected by the backend stylesheet (authoritative). */

/* -----------------------------
   CopyDesk – Ascend header overrides
   (Copydesk needs a different header hierarchy than other Ascend apps.)
----------------------------- */

/* Layout: Left = app + job name, Right = meta stack, Far right = Push */
.ascend-app-header {
  display: grid;
  grid-template-columns: 1fr minmax(220px, auto) auto;
  align-items: center;
  gap: 1.25rem;
}

/* Left block: COPYDESK (thin) over Job name (big) */
.ascend-app-title-block {
  display: flex;
  flex-direction: column;
  gap: 0.55rem;
}

.ascend-app-title {
  font-size: 0.95rem;
  letter-spacing: 0.28em;
  text-transform: uppercase;
  opacity: 0.75;
  font-weight: 500;
}

/* Job name should be large, bold, NOT all caps */
#job-name.ascend-app-subtitle {
  font-size: 2.15rem;
  line-height: 1.1;
  font-weight: 750;
  letter-spacing: 0;
  text-transform: none;
  margin: 0;
  color: var(--ascend-app-text, rgba(0,0,0,0.88));
}

/* Right stack: Due date, countdown/job id, collaborators */
.ascend-app-meta {
  display: flex !important;        /* Ascend may hide this by default */
  flex-direction: column;
  align-items: flex-end;
  justify-self: end;
  gap: 0.35rem;
  white-space: nowrap;
  min-width: 220px;
}

#job-urgency {
  font-size: 1.05rem;
  font-weight: 700;
  color: var(--ascend-app-text, rgba(0,0,0,0.88));
}

#job-meta {
  font-size: 0.92rem;
  opacity: 0.72;
  color: var(--ascend-app-text-muted, rgba(0,0,0,0.62));
}

#job-collaborators {
  font-size: 0.95rem;
  opacity: 0.9;
  font-weight: 500;
  color: var(--ascend-app-text, rgba(0,0,0,0.82));
}

/* -----------------------------
   Translation pills (Closed-only)
----------------------------- */
.translation-pills {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  justify-content: flex-end;
  align-items: center;
  max-width: min(520px, 50vw);
}

.translation-pill {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 4px 10px;
  border-radius: 999px;
  border: 1px solid rgba(0,0,0,0.12);
  background: rgba(255,255,255,0.70);
  font-size: 12px;
  line-height: 1;
  cursor: pointer;
  user-select: none;
  white-space: nowrap;
}

.translation-pill[aria-disabled="true"] {
  cursor: default;
  opacity: 0.55;
}

.translation-pill__dot {
  width: 8px;
  height: 8px;
  border-radius: 999px;
  background: rgba(0,0,0,0.18);
}

/* seeded / human / archived “dot” states */
.translation-pill.state-seeded .translation-pill__dot { background: rgba(0,0,0,0.20); }
.translation-pill.state-human  .translation-pill__dot { background: rgba(0,0,0,0.55); }
.translation-pill.state-archived .translation-pill__dot { background: rgba(0,0,0,0.12); }

/* Keep Push pinned visually to far right */
.ascend-app-actions {
  display: flex;
  justify-content: flex-end;
}

/* -----------------------------
   CopyDesk content cap + padding rhythm
   (#3: centered, max-width, L/R padding = top padding)
----------------------------- */

.copydesk-content {
  /* Use the same unit for top padding and side padding */
  padding: 16px;

  /* Let the two lanes scale with the panel */
  width: 100%;
  max-width: none;

  margin: 0 auto;
}

/* On very wide screens, keep the background breathing room */
@media (min-width: 1440px) {
  .copydesk-content {
    max-width: none;
    width: 100%;
  }
}

/* Give small screens a bit more comfortable padding */
@media (max-width: 520px) {
  .copydesk-content {
    padding: 14px;
  }
}

/* -----------------------------
   CopyDesk Card Regime layout
----------------------------- */

.copydesk-columns {
  display: grid;
  grid-template-columns: minmax(0, 1fr) minmax(0, 1fr);
  gap: 16px;
  align-items: start;
  margin-top: 0;
  width: 100%;
}

.copydesk-col {
  min-width: 0; /* allows lanes to actually flex inside the cap */
  background: linear-gradient(
    180deg,
    rgba(255,255,255,0.72),
    rgba(255,255,255,0.50)
  );
  border: 1px solid var(--ascend-app-border);
  border-radius: 16px;
  padding: 12px 12px 14px;
}

@media (max-width: 860px) {
  .copydesk-columns {
    grid-template-columns: 1fr;
    gap: 14px;
  }
}

.copydesk-col-title {
  font-size: 0.78rem;
  letter-spacing: 0.18em;
  text-transform: uppercase;
  color: var(--ascend-app-text-muted, #64748b);
  margin: 0 0 10px 0;
  padding: 0 0 8px 2px;
  border-bottom: 1px solid var(--ascend-app-border);
}

/* -----------------------------
   Committed lane controls
----------------------------- */

.committed-controls {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin: 0 0 0.6rem 0;
}

.committed-add-slot {
  /* visuals come from ascend-apps.css (.ascend-app-panel button) */
  padding: 0.35rem 0.6rem;
  font-size: 0.85rem;
  line-height: 1.1;
}

.committed-add-slot:disabled {
  opacity: 0.45;
  cursor: default;
}

:root {
  /* One authoritative unit height for both lanes */
  --copydesk-unit-h: 220px;
  --copydesk-unit-gap: 0.6rem;
}

.committed-list,
.cards-list {
  display: grid;
  grid-auto-rows: var(--copydesk-unit-h);
  row-gap: var(--copydesk-unit-gap);
}

.committed-seg {
  height: var(--copydesk-unit-h);
  box-sizing: border-box;
  border: 1px solid var(--ascend-app-border);
  border-radius: 16px;
  padding: 12px;
  background: rgba(255,255,255,0.92);
  cursor: pointer;

  display: flex;
  align-items: flex-start;
  justify-content: flex-start;

  overflow: auto;
  word-break: break-word;

  box-shadow:
    0 1px 0 rgba(15, 23, 42, 0.04),
    0 14px 42px rgba(15, 23, 42, 0.08);
}

.committed-seg:not(.is-divider):hover {
  border-color: color-mix(in srgb, var(--ascend-app-accent) 55%, var(--ascend-app-border) 45%);
}

.committed-seg.is-divider {
  /* keep the slot height, but center the divider inside it */
  cursor: default;
  border: none;
  background: transparent;

  display: flex;
  align-items: center;        /* vertical center */
  justify-content: center;    /* horizontal center */

  padding: 0;                 /* no top bias */
  overflow: hidden;           /* prevent scrollbars in divider slots */
  white-space: nowrap;
  user-select: none;

  line-height: 1;             /* tighten baseline “float” */
  letter-spacing: -0.08em;    /* tighter tracking = more “solid” */
  opacity: 0.9;
}

.committed-divider-line {
  height: 1px;
  background: var(--ascend-app-border);
  margin: 0.25rem 0;
}

.committed-divider-label {
  display: none !important; /* No label per spec */
}

.committed-seg.is-marked-delete {
  background-image: repeating-linear-gradient(
    135deg,
    rgba(176, 0, 32, 0.18),
    rgba(176, 0, 32, 0.18) 7px,
    rgba(255, 255, 255, 0.00) 7px,
    rgba(255, 255, 255, 0.00) 14px
  );
  border-color: rgba(176, 0, 32, 0.85);
  box-shadow:
    0 1px 0 rgba(15, 23, 42, 0.04),
    0 14px 38px rgba(176, 0, 32, 0.10);
}

.card-slot {
  height: var(--copydesk-unit-h);
}

.card {
  height: var(--copydesk-unit-h);
  box-sizing: border-box;
  border: 1px solid var(--ascend-app-border);
  border-radius: 16px;
  padding: 12px;
  background: rgba(255,255,255,0.92);

  /* Two-column card: main + right rail */
  display: grid;
  grid-template-columns: 1fr auto;
  column-gap: 0.6rem;
  align-items: stretch;

  box-shadow:
    0 1px 0 rgba(15, 23, 42, 0.04),
    0 14px 42px rgba(15, 23, 42, 0.08);
}

.card-btn {
  /* visuals come from ascend-apps.css (.ascend-app-panel .card-btn) */
  padding: 0.25rem 0.45rem;
  line-height: 1;
}

.card-btn:disabled {
  opacity: 0.45;
  cursor: default;
}

.card-select {
  width: 100%;
  margin: 0.25rem 0 0.45rem 0;
}

.card-textarea {
  width: 100%;
  height: 100%;
  min-height: 0;      /* CRITICAL */
  max-height: 100%;   /* CRITICAL */
  resize: none;       /* prevents “escape the card” resizing */
  overflow: auto;     /* scroll inside */
  line-height: 1.35;

  /* keep containment/layout here; let ascend-apps.css own the “control” visuals */
  box-sizing: border-box;
}

/* -----------------------------
   Headline/Subheadline: one-line (no wrap), horizontal scroll
----------------------------- */
.card-textarea--one-line {
  white-space: nowrap;
  overflow-x: auto;
  overflow-y: hidden;
}

/* -----------------------------
   Card: Bullet
----------------------------- */

.card-preview {
  margin-top: 8px;
  padding: 10px 12px;
  border: 1px solid var(--ascend-app-border);
  border-radius: 12px;
  background: rgba(255,255,255,0.75);
  color: var(--ascend-app-text, rgba(0,0,0,0.86));
  overflow: auto;
  line-height: 1.35;
  font-size: 0.95rem;
}

.card-preview .bullet-glyph {
  opacity: 0.85;
}
/* -----------------------------
   Card: Section Divider editor (line only)
----------------------------- */

.card-divider {
  user-select: none;
  white-space: nowrap;
  opacity: 0.9;
}

/* No visible label/input for divider */
.card-divider-input {
  display: none !important;
}

/* "Delete segment" is an ACTION: there is NO visible text surface in delete mode.
   (JS swaps textarea/divider editor for a hidden [data-role="card-text"] field.) */
.card.is-delete-mark .card-textarea,
.card.is-delete-mark .card-divider,
.card.is-delete-mark .card-divider-input {
  display: none !important;
}

/* Intentionally unused: "Delete segment" is expressed ONLY in the committed lane. */
/* .card.is-delete-row { border-color: #b00020; } */

/* delete-row styling intentionally removed from card textarea */
/* delete intent is expressed ONLY in the committed lane */

.card-main {
  display: grid;
  grid-template-rows: auto 1fr;
  row-gap: 0.45rem;
  min-width: 0;
  min-height: 0; /* CRITICAL: allows textarea row to shrink inside fixed-height card */
}

/* Delete-mode: no editor row, so don't reserve the 1fr “text surface” space. */
.card.is-delete-mark .card-main {
  grid-template-rows: auto auto;
  align-content: start;
}

/* Delete segment: no explanatory text */
.card-delete-note {
  display: none !important;
}

.card-rail {
  display: grid;
  grid-template-rows: auto 1fr auto;
  row-gap: 0.45rem;
  align-items: start;
}

.card-rail-top,
.card-rail-mid,
.card-rail-bot {
  display: flex;
  flex-direction: column;
  gap: 0.35rem;
  align-items: center;
}

/* Rail order: + (inside) above arrow (outside/bottom) */
.card-rail-bot .card-btn[data-role="add-below"] { order: 1; }
.card-rail-bot .card-btn[data-role="move-down"] { order: 2; }

.card-rail-mid {
  justify-content: center;
  align-self: stretch; /* centers trash vertically */
}

/* Optional: make the rail feel like a tool strip */
.card-rail .card-btn {
  padding: 0.25rem 0.35rem;
}

/* Empty slot placeholder card */
.card--empty {
  height: var(--copydesk-unit-h);
  box-sizing: border-box;

  border: 1px dashed color-mix(in srgb, var(--ascend-app-border) 40%, rgba(148, 163, 184, 0.85) 60%);
  border-radius: 16px;
  background:
    repeating-linear-gradient(
      135deg,
      rgba(2, 6, 23, 0.03) 0px,
      rgba(2, 6, 23, 0.03) 10px,
      rgba(2, 6, 23, 0.01) 10px,
      rgba(2, 6, 23, 0.01) 20px
    );
  opacity: 0.9;
  display: grid;
  place-items: center;
  padding: 14px;
}

.card--empty::before {
  content: "";
}

/* Optional: soften when hovering near it */
.card--empty:hover {
  opacity: 1;
  border-color: color-mix(in srgb, var(--ascend-app-accent) 55%, var(--ascend-app-border) 45%);
}

/* Optional: if your layout expects the same grid structure as real cards */
.card--empty .card-main,
.card--empty .card-rail {
  display: none;
}

.status-bar {
  margin-top: 0.75rem;
  font-size: 0.85rem;
  color: var(--ascend-app-text-muted);
}

.status-bar.status-error { color: #b00020; }