<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <!-- <head>  -->
<link rel="icon" type="image/png" href="favicon.png">
<title>Codedesk â€” by jacobhenderson.studio</title>
<meta name="description" content="No accounts or tracking. QR creation in your browser.">

<link rel="canonical" href="https://okqral.com/">
<meta name="theme-color" content="#0b0b0b" media="(prefers-color-scheme: dark)">
<meta name="theme-color" content="#ffffff"  media="(prefers-color-scheme: light)">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="1200">
<meta name="twitter:image:alt" content="A crisp QR with okQRal caption â€” Free QR Codes for Free People.">

<meta property="og:title" content="okQRal â€” Free QR Codes for Free People">
<meta property="og:description" content="Generate beautiful, private QR codes instantly. No logins, no tracking, no surveillance.">
<meta property="og:image" content="https://okqral.com/assets/sms_preview.png">
<meta property="og:type" content="website">
<meta property="og:url" content="https://okqral.com/">

<!-- Fonts & Tailwind -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

<!-- === Google Fonts for all preview options === -->
<link rel="stylesheet" href="https://fonts.googleapis.com/css2
?family=Bebas+Neue
&family=IBM+Plex+Sans:wght@400;600
&family=IBM+Plex+Serif:wght@400;600
&family=Public+Sans:wght@400;600
&family=Playfair+Display:wght@600
&family=Space+Grotesk:wght@400;600
&family=Manrope:wght@400;600
&family=Inter:wght@400;600
&family=JetBrains+Mono:wght@400;600
&family=Work+Sans:wght@400;600
&display=swap">
 
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Your stylesheet -->
  <link rel="stylesheet" href="/ascend-portal/assets/ascend.css">
  <link rel="stylesheet" href="/ascend-portal/assets/ascend-apps.css">
  <link rel="stylesheet" href="./styles/theme.css">
</head>

<body class="min-h-screen text-neutral-900 ascend-app-body">

  <!-- HEADER (full-width, sticky) -->
  <header class="header-bar sticky top-0 z-30 bg-white/90 dark:bg-neutral-900/90 backdrop-blur border-b border-neutral-200 dark:border-neutral-800">
    <div class="mx-auto max-w-6xl px-4 py-3 flex items-center gap-8">
      <h1 class="text-lg font-semibold tracking-tight codedesk-mark">
        <a href="./index.html" class="hover:underline focus:outline-none focus:ring-2 focus:ring-indigo-500">
    ðŸ”µ CODEDESK
  </a>
</h1>

      <!-- Controls (right-aligned) -->
      <div class="ml-auto flex items-center gap-3" id="topControls">
        <!-- Type -->
        <label class="text-sm">
          <span class="sr-only">Type</span>
          <select id="qrType" class="topctl topctl--chev text-sm" aria-label="Type">
            <option value="URL" selected>URL</option>
            <option value="Payment">Payment</option>
            <option value="WiFi">WiFi</option>
            <option value="Contact">Contact</option>
            <option value="Message">Message</option>
            <option value="Event">Event</option>
            <option value="Map">Map</option>
          </select>
        </label>
      </div>
    </div>
  </header>

  <!-- Main -->
  <main
  class="mx-auto max-w-7xl px-6 py-8 grid
         grid-cols-1
         xl:grid-cols-2
         justify-items-center xl:justify-items-start
         items-start gap-10">

<!-- LEFT: Preview Stage -->
<div class="stage-stick w-full flex flex-col items-center gap-3 justify-self-center">
  <section class="w-full flex justify-center">
    <!-- Own the iPhone aspect ratio here -->
    <div class="preview-stage relative mx-auto overflow-visible">
      <div class="absolute inset-0 p-0" style="overflow:visible">
        <!-- Single card: stroke/fill live here; SVG stays transparent -->
        <div id="qrPreview" class="w-full h-full overflow-visible flex flex-col relative">
          <!-- live SVG mounts here -->
          <div id="qrMount" class="flex-1 min-h-[200px] grid justify-items-center items-start w-full"></div>
        </div>

      </div>
    </div>
  </section>

  <!-- Mandatory filename capture (under preview, above flippers) -->
  <section id="codedeskFilenameSection">
    <label>
      <span class="sr-only">Filename</span>
      <input id="codedeskFilename"
        type="text"
        maxlength="60"
        required
        placeholder="Filename (required to Finish)">
    </label>
  </section>
</div>

<!-- RIGHT: Stepper (controls) -->
<section id="stepper"
  class="stage-stick space-y-4 w-full max-w-[560px] mx-auto justify-self-center">

  <!-- Caption -->
  <div class="step-card"
       data-step="caption">
    <button class="w-full step-header px-4 py-3 text-left font-medium" data-step-toggle>
      Caption
    </button>
    <div class="px-4 pb-4 space-y-3" data-step-panel style="display:none">
      <!-- Headline -->
      <label class="block text-sm">
        <span class="sr-only">Headline</span>
        <textarea id="campaign"
          rows="1"
          maxlength="20"
          class="w-full rounded-md border px-3 py-2"
          placeholder="Headline"></textarea>
      </label>

      <!-- Body -->
      <label class="block text-sm">
        <span class="sr-only">Body (optional)</span>
        <textarea id="captionBody"
          rows="1"
          maxlength="60"
          class="w-full rounded-md border px-3 py-2"
          placeholder="Body (optional)"></textarea>
      </label>

    </div>
  </div>

<!-- Design -->
<div class="step-card"
     data-step="design">

    <!-- Header wrapper (font pill lives here, matching ECC structure) -->
    <div class="step-header-wrap flex items-center gap-3">
      <button class="flex-1 step-header px-4 py-3 text-left font-medium" data-step-toggle>
        Design
      </button>

      <!-- Font pill -->
      <div id="fontPill" class="ecc-pill" role="group" aria-label="Preview font">
        <label class="text-sm sr-only" for="fontFamily">Preview font</label>
        <select id="fontFamily" class="topctl topctl--chev text-sm" aria-label="Preview font">
          <option value="IBM Plex Sans">IBM Plex Sans</option>
          <option value="IBM Plex Serif">IBM Plex Serif</option>
          <option value="Bebas Neue">Bebas Neue</option>
          <option value="Public Sans">Public Sans</option>
          <option value="Playfair Display">Playfair Display</option>
          <option value="Space Grotesk">Space Grotesk</option>
          <option value="Manrope">Manrope</option>
          <option value="Inter">Inter</option>
          <option value="JetBrains Mono">JetBrains Mono</option>
          <option value="Work Sans">Work Sans</option>
        </select>
      </div>
    </div>
  <!-- Closed by default -->
  <div class="px-4 pb-4 space-y-4" data-step-panel style="display:none">
    <!-- Color quadrant -->
    <div class="grid gap-3 sm:grid-cols-2">
      <!-- Caption Text Color -->
      <label class="text-sm">
        <span class="block mb-1">Caption Text Color</span>
        <div class="flex items-center gap-2">
          <input id="captionColor" type="color" class="h-9 w-10 rounded-md border" value="#000000" />
          <input id="captionColorHex" type="text" class="flex-1 rounded-md border px-3 py-2 text-sm" placeholder="#RRGGBB" />
        </div>
      </label>

      <!-- Body -->
      <label class="text-sm">
        <span class="block mb-1">Body</span>
        <div class="flex items-center gap-2">
          <input id="bodyColor" type="color" class="h-9 w-10 rounded-md border" value="#000000" />
          <input id="bodyColorHex" type="text" class="flex-1 rounded-md border px-3 py-2 text-sm" placeholder="#RRGGBB" />
        </div>
      </label>

      <!-- Eye Ring -->
      <label class="text-sm">
        <span class="block mb-1">Eye Ring</span>
        <div class="flex items-center gap-2">
          <input id="eyeRingColor" type="color" class="h-9 w-10 rounded-md border" value="#9CA3AF" />
          <input id="eyeRingColorHex" type="text" class="flex-1 rounded-md border px-3 py-2 text-sm" placeholder="#RRGGBB" />
        </div>
      </label>

      <!-- Eye Center -->
      <label class="text-sm">
        <span class="block mb-1">Eye Center</span>
        <div class="flex items-center gap-2">
          <input id="eyeCenterColor" type="color" class="h-9 w-10 rounded-md border" value="#6B7280" />
          <input id="eyeCenterColorHex" type="text" class="flex-1 rounded-md border px-3 py-2 text-sm" placeholder="#RRGGBB" />
        </div>
      </label>
    </div>

    <!-- Shapes -->
    <div class="grid gap-3 sm:grid-cols-3">
      <label class="text-sm">
        <span class="block mb-1">Modules</span>
        <select id="moduleShape" class="w-full rounded-md border px-3 py-2">
          <option>Square</option><option>Rounded</option><option>Circle</option>
        </select>
      </label>
      <label class="text-sm">
        <span class="block mb-1">Eye Ring</span>
        <select id="eyeRingShape" class="w-full rounded-md border px-3 py-2">
          <option>Square</option><option>Rounded</option><option>Circle</option>
        </select>
      </label>
      <label class="text-sm">
        <span class="block mb-1">Eye Center</span>
        <select id="eyeCenterShape" class="w-full rounded-md border px-3 py-2">
          <option>Square</option><option>Rounded</option><option>Circle</option>
        </select>
      </label>
    </div>

    <!-- Module fill -->
    <div class="grid gap-3 sm:grid-cols-3">
      <label class="text-sm">
        <span class="block mb-1">Module Fill</span>
        <select id="modulesMode" class="w-full rounded-md border px-3 py-2">
          <option>Shape</option><option>Emoji</option>
        </select>
      </label>
      <label class="text-sm" id="modulesEmojiWrap">
        <span class="block mb-1">Emoji</span>
        <div class="flex gap-2">
          <input id="modulesEmoji" type="text" class="w-full rounded-md border px-3 py-2" value="ðŸ˜€" />
          <button type="button" data-emoji-target="modulesEmoji" class="px-3 py-2 text-sm rounded-md border hover:bg-neutral-50">Pickâ€¦</button>
        </div>
      </label>
      <label class="text-sm" id="modulesScaleWrap">
        <span class="block mb-1">Scale</span>
        <div class="flex items-center gap-2">
          <input id="modulesScale" type="number" step="0.05" min="0.1" max="1" class="w-full rounded-md border px-3 py-2" value="0.9" />
        </div>
      </label>
    </div>

    <!-- Center content -->
    <div class="grid gap-3 sm:grid-cols-3 items-start">
      <label class="text-sm">
        <span class="block mb-1">Center content</span>
        <select id="centerMode" class="w-full rounded-md border px-3 py-2">
          <option>None</option>
          <option>Blank</option>
          <option>Emoji</option>
        </select>
      </label>
      <label class="text-sm" id="centerEmojiWrap">
        <span class="block mb-1">Emoji</span>
        <div class="flex gap-2">
          <input id="centerEmoji" type="text" class="w-full rounded-md border px-3 py-2" value="ðŸ˜Š" />
          <button type="button" data-emoji-target="centerEmoji" class="px-3 py-2 text-sm rounded-md border hover:bg-neutral-50">Pickâ€¦</button>
        </div>
      </label>
      <label class="text-sm" id="centerScaleWrap">
        <span class="block mb-1">Scale</span>
        <div class="flex items-center gap-2">
          <input id="centerScale" type="number" step="0.05" min="0.1" max="1.5" class="w-full rounded-md border px-3 py-2" value="2" />
        </div>
      </label>
    </div>

    <!-- Divider -->
    <div class="border-t border-neutral-200 dark:border-neutral-800 my-2"></div>

    <!-- Background -->
    <div class="space-y-2">
      <div class="text-sm font-medium">Background</div>

      <!-- Columns:
           1) swatch (auto)
           2) hex (auto)
           3) link (auto, row-span)
           4) slider (flex)
           5) number (auto) -->
            <div class="grid grid-cols-[minmax(0,1fr)_minmax(0,1fr)_auto] grid-rows-2 items-center gap-2">

              <!-- Col 1 (row 1): swatch + hex -->
              <div class="flex items-center gap-2">
                <input id="bgTopColor" type="color" class="color-dot h-9 w-9" value="#FFFFFF" />
                <input id="bgTopHex" type="text" class="w-full rounded-md border px-3 py-2 text-sm truncate" placeholder="#RRGGBB" />
              </div>

              <!-- Col 2 (rows 1â€“2): link + both sliders -->
              <div class="grid grid-cols-[auto_minmax(0,1fr)] grid-rows-2 items-center gap-2 row-span-2">
                <button id="bgLink" type="button"
                        class="row-span-2 self-center"
                        aria-label="Background linked"
                        aria-pressed="true"
                        title="Background linked">ðŸ”—</button>

                <input id="bgTopAlpha" type="range" min="0" max="100" step="1" class="w-full h-6" value="100" />
                <input id="bgBottomAlpha" type="range" min="0" max="100" step="1" class="w-full h-6" value="100" />
              </div>

              <!-- Col 3 (row 1): numeric -->
              <input id="bgTopAlphaNum" type="number" min="0" max="100" step="1" value="100"
                    class="w-16 rounded-md border px-2 py-2 text-sm justify-self-start"
                    aria-label="Top opacity (%)" />

              <!-- Col 1 (row 2): swatch + hex -->
              <div class="flex items-center gap-2">
                <input id="bgBottomColor" type="color" class="color-dot h-9 w-9" value="#FFFFFF" />
                <input id="bgBottomHex" type="text" class="w-full rounded-md border px-3 py-2 text-sm truncate" placeholder="#RRGGBB" />
              </div>

              <!-- Col 3 (row 2): numeric -->
              <input id="bgBottomAlphaNum" type="number" min="0" max="100" step="1" value="100"
                    class="w-16 rounded-md border px-2 py-2 text-sm justify-self-start"
                    aria-label="Bottom opacity (%)" />

            </div>
    </div>
  </div>
</div>

<!-- Mechanicals -->
<div class="step-card"
     data-step="mechanicals">

  <!-- Header wrapper (pill lives here) -->
  <div class="step-header-wrap flex items-center gap-3">
    <button class="flex-1 step-header px-4 py-3 text-left font-medium" data-step-toggle>
      Mechanicals
    </button>

    <!-- ECC pill (inside header) -->
    <div id="eccPill" class="ecc-pill" role="group" aria-label="Error correction">
      <button type="button" class="ecc-btn" data-ecc="L">L</button>
      <button type="button" class="ecc-btn" data-ecc="M">M</button>
      <button type="button" class="ecc-btn" data-ecc="Q">Q</button>
      <button type="button" class="ecc-btn" data-ecc="H">H</button>
    </div>
  </div>

  <!-- Closed by default -->
  <div class="px-4 pb-4 space-y-4" data-step-panel style="display:none">
    <div id="detailsPanel" class="space-y-4"></div>
  </div>
</div>

<!-- Finish (header-only action row; no accordion panel) -->
<!-- Finish -->
<div id="finishCard"
     class="step-card"
     data-step="finish">

  <div class="step-header-wrap flex items-center gap-3">
    <button type="button"
            class="flex-1 step-header px-4 py-3 text-left font-medium"
            data-step-toggle>
      Create working file
    </button>

    <button id="exportBtn" type="button" data-action="finish"
            class="ml-auto px-4 py-2 rounded-lg bg-black text-white text-sm">
      âœ¨
    </button>
  </div>

</div>

  <!-- Emoji Modal -->
  <div id="emojiModal" class="hidden fixed inset-0 z-50 modal-bg grid place-items-center p-4">
    <div class="w-full max-w-3xl rounded-2xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 shadow-lg">
      <div class="flex items-center gap-3 px-4 py-3 border-b dark:border-neutral-800">
        <div class="text-sm font-medium"></div>
        <input id="emojiSearch" type="text" placeholder="Searchâ€¦" class="ml-auto w-64 rounded-md border px-3 py-2 text-sm" />
        <button
        id="emojiClose"
        class="ml-auto px-3 py-2 rounded-md border bg-neutral-200 text-neutral-900 dark:bg-neutral-700 dark:text-neutral-100 text-sm hover:bg-neutral-300 dark:hover:bg-neutral-600 transition"
      >
      x
      </button>
      </div>
      <div class="max-h-[60vh] overflow-auto p-4">
        <div id="emojiGrid" class="grid emoji-grid gap-2"></div>
      </div>
    </div>
  </div>

</main>

<script>
  // CodeDesk â†’ FileRoom wiring (required)
  window.CODEDESK_FILEROOM_API_BASE =
    'https://script.google.com/macros/s/AKfycbyZauMq2R6mIElFnAWVbWRDVgJqT713sT_PTdsixNi9IyZx-a3yiFT7bjk8XE_Fd709/exec';

  window.CODEDESK_FILEROOM_FOLDER_ID =
    '1x882jC2h_2YJsIXQrV1K56nqKvCPzJ4N';
</script>

<!-- Your app code (keep this if you already have it) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<script src="./qr_app.js?v=9" defer></script>

<!-- Emoji picker wiring -->
<script type="module">
  import 'https://cdn.jsdelivr.net/npm/emoji-picker-element@^1/index.js';

  const emojiModal  = document.getElementById('emojiModal');
  const emojiClose  = document.getElementById('emojiClose');
  let   emojiTarget = null;

  function openEmoji(targetId) {
    emojiTarget = document.getElementById(targetId) || null;
    emojiModal.classList.remove('hidden');
    queueMicrotask(() => document.querySelector('emoji-picker')?.focus());
  }
  function closeEmoji() {
    emojiModal.classList.add('hidden');
    emojiTarget = null;
    if (typeof window.render === 'function') window.render();
  }
  window.openEmoji  = openEmoji;
  window.closeEmoji = closeEmoji;

  document.querySelectorAll('[data-emoji-target]')
    .forEach(btn => btn.addEventListener('click', () => openEmoji(btn.getAttribute('data-emoji-target'))));
  emojiClose?.addEventListener('click', closeEmoji);
  emojiModal?.addEventListener('click', (e) => { if (e.target === emojiModal) closeEmoji(); });
  window.addEventListener('keydown', (e) => { if (e.key === 'Escape' && !emojiModal.classList.contains('hidden')) closeEmoji(); });

  // Insert picker and connect selection
  const grid   = document.getElementById('emojiGrid');
  const picker = document.createElement('emoji-picker');
  picker.setAttribute('emojis-per-row', '10');
  picker.setAttribute('skin-tone-emoji', 'ðŸ‘');
  picker.style.width = '100%';
  picker.style.maxHeight = '60vh';
  picker.style.border = '0';

  const applyPickerTheme = () => {
    picker.setAttribute('theme', document.documentElement.classList.contains('dark') ? 'dark' : 'light');
  };
  applyPickerTheme();
  document.getElementById('themeToggle')?.addEventListener('click', applyPickerTheme);
  window.matchMedia?.('(prefers-color-scheme: dark)').addEventListener?.('change', applyPickerTheme);

  // Keep picker in sync whenever <html> toggles dark/light
new MutationObserver(() => applyPickerTheme())
  .observe(document.documentElement, { attributes: true, attributeFilter: ['class'] });

  grid.replaceWith(picker);

  picker.addEventListener('emoji-click', (e) => {
    const char = e.detail.unicode;
    if (emojiTarget) {
      emojiTarget.value = char;
      emojiTarget.dispatchEvent(new Event('input', { bubbles: true }));
    }
    closeEmoji();
  });
</script>

<script>
(function () {
  const onTab = e => { if (e.key === 'Tab') document.body.classList.add('kbd'); };
  const onMouse = () => document.body.classList.remove('kbd');
  window.addEventListener('keydown', onTab, { once: true });
  window.addEventListener('mousedown', onMouse);
})();
</script>

<script>
(function(){
  const sel = document.getElementById('qrType');
  if (!sel) return;
  const sync = () => sel.classList.toggle('start-here', !sel.value);
  sel.addEventListener('change', sync);
  sync(); // on load
})();
</script>

<script>
(function () {
  const qs = new URLSearchParams(location.search);
  const hashEgg = (location.hash.startsWith('#egg=') && location.hash.slice(5)) || '';
  const egg = qs.get('egg') || hashEgg;

  if (egg === 'love') {
    showEasterEgg('https://okqral.com/assets/love.png');
    // remove the flag from the URL so refresh returns to normal
    history.replaceState({}, '', location.pathname);
  }

  function showEasterEgg(src){
    const overlay = document.createElement('div');
    overlay.style.cssText = `
      position:fixed; inset:0; background:rgba(0,0,0,.6);
      display:flex; align-items:center; justify-content:center;
      z-index:9999; padding:24px;
    `;
    const card = document.createElement('div');
    card.style.cssText = `
      background: var(--md-sys-color-surface, #fff);
      color: var(--md-sys-color-on-surface, #111);
      border-radius: 16px; max-width: 92vw; max-height: 90vh;
      box-shadow: 0 10px 40px rgba(0,0,0,.35); overflow:hidden;
    `;
    const img = document.createElement('img');
    img.src = src;
    img.alt = 'Love.jpg';
    img.style.cssText = 'display:block; max-width:90vw; max-height:72vh; object-fit:contain; background:#fff';

    const bar = document.createElement('div');
    bar.style.cssText = 'display:flex; gap:12px; align-items:center; justify-content:space-between; padding:12px 16px;';
    bar.innerHTML = `
      <span style="font:600 14px/1.2 system-ui, -apple-system, Segoe UI, Roboto">Easter egg: Love.jpg</span>
      <div style="display:flex; gap:8px; align-items:center;">
        <a href="/" style="text-decoration:none; font:600 13px system-ui">okQRal</a>
        <button type="button" aria-label="Close" style="border:0; background:#000; color:#fff; border-radius:10px; padding:8px 12px; cursor:pointer;">Close</button>
      </div>
    `;
    bar.querySelector('button').onclick = () => document.body.removeChild(overlay);

    card.appendChild(img);
    card.appendChild(bar);
    overlay.appendChild(card);
    overlay.addEventListener('click', (e) => { if (e.target === overlay) bar.querySelector('button').click(); });
    document.body.appendChild(overlay);
  }
})();
</script>

<!-- Finish overlay (blocking) -->
<div id="finishOverlay"
     class="hidden fixed inset-0 z-[999] bg-black/40 backdrop-blur-sm grid place-items-center p-4">
  <div class="w-full max-w-sm rounded-2xl bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 shadow-lg px-6 py-5">
    <div class="flex items-center gap-3">
      <div class="h-5 w-5 rounded-full border-2 border-neutral-400 border-t-transparent animate-spin"></div>
      <div class="text-sm font-medium">Creating working file + FileRoom PNGâ€¦</div>
    </div>
    <div class="mt-2 text-xs opacity-70">Do not close this tab.</div>
  </div>
</div>

</body>
</html>