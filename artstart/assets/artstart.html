<!DOCTYPE html>
<html lang="en" data-ascend-state="unauthenticated">
  <head>
    <meta charset="UTF-8">
    <title>ArtStart – Job View</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Shared Ascend styling -->
    <link rel="stylesheet" href="../../assets/ascend.css">
    <link rel="stylesheet" href="../../assets/ascend-apps.css">

    <style>
      /* Page-scoped layout; rely on ascend.css for core tokens */
      body {
        margin: 0;
        background-color: #f5f5f7;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        color: #111827;
      }

      .artstart-shell {
        min-height: 100vh;
        display: flex;
        flex-direction: column;
      }

      .artstart-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 12px 20px;
        background-color: #ffffff;
        border-bottom: 1px solid #e5e7eb;
      }

      .artstart-header-left {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .artstart-mark {
        width: 28px;
        height: 28px;
        border-radius: 9999px;
        border: 1px solid #111827;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 15px;
        font-weight: 600;
      }

      .artstart-title-block {
        display: flex;
        flex-direction: column;
      }

      .artstart-title-main {
        font-size: 14px;
        font-weight: 600;
      }

      .artstart-title-sub {
        font-size: 12px;
        color: #6b7280;
      }

      .artstart-header-middle {
        text-align: center;
        max-width: 40%;
      }

      .artstart-job-name {
        font-size: 14px;
        font-weight: 600;
      }

      .artstart-job-meta {
        font-size: 12px;
        color: #6b7280;
      }

      .artstart-header-right {
        display: flex;
        flex-direction: column;
        align-items: flex-end;
        gap: 4px;
      }

      .artstart-user-label {
        font-size: 12px;
        color: #4b5563;
      }

      .artstart-back-link {
        font-size: 12px;
        color: #2563eb;
        text-decoration: none;
      }

      .artstart-main {
        flex: 1;
        padding: 16px 20px 80px;
      }

      .artstart-grid {
        display: flex;
        flex-direction: column;
        gap: 16px;
      }

      .artstart-lower-grid {
        display: grid;
        grid-template-columns: minmax(0, 1.1fr) minmax(0, 1fr);
        gap: 16px;
        align-items: flex-start;
      }

      @media (max-width: 900px) {
        .artstart-grid {
          gap: 12px;
        }
        .artstart-lower-grid {
          grid-template-columns: minmax(0, 1fr);
        }
        .artstart-header-middle {
          max-width: 60%;
        }
      }

      .artstart-card {
        background-color: #ffffff;
        border-radius: 10px;
        border: 1px solid #e5e7eb;
        padding: 14px 16px 16px;
        margin-bottom: 12px;
      }

      .artstart-card h2 {
        margin: 0 0 8px;
        font-size: 13px;
        font-weight: 600;
      }

      .artstart-card p {
        margin: 0 0 6px;
        font-size: 13px;
        line-height: 1.5;
      }

      .artstart-card .label {
        font-weight: 600;
      }

      .artstart-muted {
        font-size: 12px;
        color: #6b7280;
      }

      .artstart-format-card {
        display: flex;
        flex-direction: column;
        align-items: stretch;
      }

      .artstart-format-meta {
        display: flex;
        flex-wrap: wrap;
        gap: 12px 32px;
        font-size: 12px;
        margin-bottom: 10px;
      }

      .artstart-format-meta-column {
        min-width: 180px;
      }

      .artstart-canvas-box {
        position: relative;
        margin-top: 16px;
        width: 100%;
        max-width: 720px;
        min-height: 420px; /* more vertical room so print can be big */
        align-self: center;
        border-radius: 12px;
        border: 1px solid #d1d5db;
        background-image:
          linear-gradient(to right, rgba(148, 163, 184, 0.35) 1px, transparent 1px),
          linear-gradient(to bottom, rgba(148, 163, 184, 0.35) 1px, transparent 1px),
          linear-gradient(to right, rgba(148, 163, 184, 0.15) 1px, transparent 1px),
          linear-gradient(to bottom, rgba(148, 163, 184, 0.15) 1px, transparent 1px);
        background-size: 96px 96px, 96px 96px, 24px 24px, 24px 24px;
        box-shadow: 0 16px 40px rgba(15, 23, 42, 0.18);
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 18px;
      }

      /* Digital formats: let the canvas be its true pixel size */
      .artstart-canvas-box[data-media-kind="digital"] {
        width: auto;
        max-width: none;
        min-height: 0;
        overflow: auto;      /* scroll if it's wider than the card */
        align-self: center;
      }

      .artstart-canvas-inner {
        position: relative;
        max-width: 100%;
        max-height: 100%;
        box-sizing: border-box;
        border-radius: 0;
        background-color: #ffffff;
        background-image: repeating-linear-gradient(
          135deg,
          #44a2bc,
          #44a2bc 3px,
          #ffffff 3px,
          #ffffff 6px
        );
        border: 1px solid rgba(15, 23, 42, 0.25);
        box-shadow: 0 8px 24px rgba(15, 23, 42, 0.2);
        overflow: hidden;
      }

      /* Digital canvas: don’t clamp to the box; use real px size */
      .artstart-canvas-box[data-media-kind="digital"] .artstart-canvas-inner {
        max-width: none;
        max-height: none;
        /* Digital canvases: clean white, no mechanical pattern */
        background-color: #ffffff;
        background-image: none;
      }

      .artstart-canvas-bleed {
        position: absolute;
        box-sizing: border-box;
        border-radius: 0;
        border: 2px dashed rgba(79, 209, 197, 0.9);
        pointer-events: none;
      }

      /* Digital projects don’t show bleed graphically */
      .artstart-canvas-box[data-media-kind="digital"] .artstart-canvas-bleed {
        display: none;
      }

      .artstart-canvas-safe {
        position: absolute;
        inset: 6%; /* JS overwrites for print */
        box-sizing: border-box;
        border-radius: 0;
        background-color: #ffffff;
        border: 1px solid #ec4899; /* magenta trim stroke */
        padding: 6px 8px;

        /* Fixed allocation by pixel height: 15/15/20/40/10 */
        display: grid;
        grid-template-rows: 15% 15% 20% 40% 10%;
        gap: 4px;
        overflow: hidden;
      }

      .artstart-canvas-cell {
        display: flex;
        align-items: center;   /* centered vertical alignment in its cell */
        overflow: hidden;
        min-height: 0;         /* allow grid children to shrink */
      }

      .artstart-canvas-cell-meta {
        display: flex;
        flex-direction: column;
        justify-content: center; /* centered vertical alignment in its cell */
        align-items: flex-end;   /* right aligned */
        overflow: hidden;
        min-height: 0;
        text-align: right;
      }

      /* Canvas text rows: single-line meters + multi-line body */

      /* Each hard-returned line is a block */
      .artstart-line{
        display:block;
        white-space:pre;
      }

      /* Meta: lines must occupy full width so text-align:right actually works */
      .artstart-row-meta .artstart-line{
        width:100%;
        text-align:right;
      }

      .artstart-canvas-row {
        /* Respect only hard returns; no browser-introduced soft wraps */
        white-space: pre;
        overflow: hidden;
        text-overflow: clip;
        line-height: 1.2;

        /* CRITICAL: constrain to the cell width so overflow is measurable + shrinkable */
        width: 100%;
        min-width: 0;
      }

      /* Text alignment: normal bands left; meta right. */
      .artstart-row-headline,
      .artstart-row-subhead,
      .artstart-row-cta,
      .artstart-row-body {
        text-align: left;
      }

      .artstart-row-meta {
        text-align: right;
      }

      /* Preview Text Formatting */
      .artstart-row-headline {
        font-weight: 600;
        letter-spacing: 0.04em;
        font-size: 22px; /* JS will override inline to fit */
      }

      .artstart-row-subhead {
        font-weight: 500;
        opacity: 0.9;
        font-size: 15px; /* JS will override inline to fit */
      }

      .artstart-row-cta {
        font-weight: 600;
        font-size: 15px; /* JS will override inline to fit */
      }

      .artstart-row-body {
        line-height: 1.3;
        font-size: 12px; /* JS will override inline to fit */
      }

      .artstart-row-meta {
        font-size: 9px;  /* JS will override inline to fit */
        opacity: 0.85;
      }

      .artstart-canvas-noinfo {
        position: absolute;
        inset: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 11px;
        color: #6b7280;
        padding: 0 24px;
        text-align: center;
      }

      .artstart-checklist {
        padding-left: 18px;
        margin: 4px 0 0;
      }

      .artstart-checklist li {
        font-size: 13px;
        margin-bottom: 4px;
      }

      .artstart-textarea--tight{
        min-height: 0;
        resize: none;
      }

      .artstart-input,
      .artstart-textarea {
        width: 100%;
        box-sizing: border-box;
        font-family: inherit;
        font-size: 13px;
        padding: 7px 8px;
        border-radius: 6px;
        border: 1px solid #d1d5db;
        margin-bottom: 8px;

        /* Explicit ink for light surfaces (do not inherit Ascend dark text) */
        color: #111827;
        background-color: #ffffff;

        /* Safari / WebKit: color can be ignored if text-fill is set upstream */
        -webkit-text-fill-color: #111827;
        caret-color: #111827;
      }

      .artstart-textarea {
        min-height: 76px;
        resize: vertical;
      }

      .artstart-input::placeholder,
      .artstart-textarea::placeholder {
        color: #9ca3af;
      }

      .artstart-working-row-grid {
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 8px 12px;
        margin-top: 6px;
        margin-bottom: 6px;
      }

      .artstart-working-column {
        display: flex;
        flex-direction: column;
        gap: 2px;
      }

      @media (max-width: 900px) {
        .artstart-working-row-grid {
          grid-template-columns: minmax(0, 1fr);
        }
      }

      /* Language row */
      .artstart-lang-row {
        display: flex;
        align-items: center;
        gap: 10px;
        margin: 10px 0 14px 0;
      }

      .artstart-lang-label {
        font-size: 12px;
        font-weight: 600;
        opacity: .75;
        min-width: 84px;
      }

      .artstart-lang-select {
        min-width: 220px;
      }

      .artstart-lang-dot {
        width: 10px;
        height: 10px;
        border-radius: 999px;
        border: 1px solid currentColor;
        opacity: .35; /* JS will raise this when "human" exists */
        display: inline-block;
      }      

      .artstart-save-row {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-top: 4px;
      }

      .artstart-save-button {
        padding: 7px 14px;
        border-radius: 9999px;
        border: none;
        cursor: pointer;
        font-size: 12px;
        font-weight: 600;
        background-color: #111827;
        color: #ffffff;
      }

      .artstart-save-status {
        font-size: 11px;
        color: #6b7280;
      }

      .artstart-footer-strip {
        position: fixed;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #ffffff;
        border-top: 1px solid #e5e7eb;
        padding: 8px 20px;
      }

      .artstart-footer-grid {
        display: grid;
        grid-template-columns: repeat(3, minmax(0, 1fr));
        gap: 12px;
      }

      @media (max-width: 900px) {
        .artstart-footer-grid {
          grid-template-columns: minmax(0, 1fr);
        }
      }

      .artstart-footer-item-title {
        font-size: 11px;
        font-weight: 600;
        margin-bottom: 2px;
      }

      .artstart-footer-item-body {
        font-size: 11px;
        color: #6b7280;
      }

      .artstart-error {
        max-width: 520px;
        margin: 32px auto;
        background-color: #fef2f2;
        border: 1px solid #fecaca;
        color: #991b1b;
        padding: 12px 14px;
        border-radius: 8px;
        font-size: 13px;
      }

            /* Media-kind specific canvas tweaks */
      .artstart-canvas-box[data-media-kind="digital"] .artstart-canvas-bleed {
        display: none;
      }

      .artstart-canvas-box[data-media-kind="digital"] .artstart-canvas-safe {
        inset: 0;
        border-radius: 0;
        box-shadow: 0 12px 32px rgba(15, 23, 42, 0.25);
      }

            .artstart-canvas-main {
        display: flex;
        flex-direction: column;
        gap: 4px;
      }

      .artstart-canvas-meta-block {
        margin-top: 6px;
        text-align: right;
        align-self: stretch;   /* use full safe width */
        width: 100%;
      }

    </style>
  </head>
  <body>
    <div class="artstart-shell">
      <header class="artstart-header">
        <div class="artstart-header-left">
          <div class="artstart-mark">A</div>
          <div class="artstart-title-block">
            <div class="artstart-title-main">ArtStart – Job View</div>
            <div class="artstart-title-sub">Ascend Visualization Studio for Nordson ICS</div>
          </div>
        </div>

        <div class="artstart-header-middle">
          <div id="job-title" class="artstart-job-name">Loading job…</div>
          <div id="job-meta" class="artstart-job-meta"></div>
        </div>

        <div class="artstart-header-right">
          <div id="artstart-user-label" class="artstart-user-label">Checking sign-in…</div>
          <a href="../../index.html" class="artstart-back-link">← Back to Ascend</a>
        </div>
        </header>

      <main class="artstart-main">
        <div id="artstart-error" class="artstart-error" style="display:none;"></div>

        <div id="artstart-grid" class="artstart-grid" style="display:none;">
          <!-- Top: Format & canvas is the hero -->
          <section class="artstart-card artstart-format-card">
            <h2>Format &amp; canvas</h2>
            <div class="artstart-format-meta">
              <div class="artstart-format-meta-column">
                <p><span class="label">Publication / channel:</span> <span id="format-publication">—</span></p>
                <p><span class="label">Placement / format:</span> <span id="format-placement">—</span></p>
              </div>
              <div class="artstart-format-meta-column">
                <p><span class="label">Size:</span> <span id="format-size">—</span></p>
                <p id="format-bleed-row"><span class="label">Bleed:</span> <span id="format-bleed">—</span></p>
              </div>
            </div>

            <div id="format-canvas-box" class="artstart-canvas-box">
              <div class="artstart-canvas-inner">
                <div class="artstart-canvas-bleed"></div>
                <div class="artstart-canvas-safe">
                  <div class="artstart-canvas-cell">
                    <div id="canvas-headline" class="artstart-canvas-row artstart-row-headline"></div>
                  </div>

                  <div class="artstart-canvas-cell">
                    <div id="canvas-subhead" class="artstart-canvas-row artstart-row-subhead"></div>
                  </div>

                  <div class="artstart-canvas-cell">
                    <div id="canvas-cta" class="artstart-canvas-row artstart-row-cta"></div>
                  </div>

                  <div class="artstart-canvas-cell">
                    <div id="canvas-body" class="artstart-canvas-row artstart-row-body"></div>
                  </div>

                  <div class="artstart-canvas-cell-meta">
                    <div id="canvas-website" class="artstart-canvas-row artstart-row-meta"></div>
                    <div id="canvas-email" class="artstart-canvas-row artstart-row-meta"></div>
                  </div>
                </div>
              </div>
              <div id="canvas-noinfo" class="artstart-canvas-noinfo">
                No canvas information available yet.
              </div>
            </div>
          </section>

          <!-- Lower: Working draft and Job overview side by side -->
          <div class="artstart-lower-grid">
            <section class="artstart-card">
              <h2>Working draft</h2>

            <div class="artstart-row artstart-lang-row">
              <div class="artstart-lang-label">Language</div>
              <select id="artstartLanguage" class="artstart-input artstart-lang-select"></select>
              <span id="artstartLangDot" class="artstart-lang-dot" title="Human-edited translation"></span>
            </div>
              <p class="artstart-muted">
                Use this space to rough in the words that need to fit. Text is mirrored into the canvas to show scale only – final layout still happens in design tools.
              </p>

              <label class="artstart-muted" for="working-headline">Headline</label>
              <input id="working-headline" class="artstart-input" type="text"
                     placeholder="Working headline…">

              <label class="artstart-muted" for="working-subhead">Subhead</label>
              <textarea id="working-subhead" class="artstart-textarea artstart-textarea--tight"
                        rows="2"
                        placeholder="Optional subhead…"></textarea>

              <label class="artstart-muted" for="working-cta">Primary call-to-action</label>
              <textarea id="working-cta" class="artstart-textarea artstart-textarea--tight"
                        rows="4"
                        placeholder="Primary CTA (e.g., URL or instruction)…"></textarea>

              <!-- Bullets renamed to Text, same ID for backend -->
              <label class="artstart-muted" for="working-bullets">Text</label>
              <textarea id="working-bullets" class="artstart-textarea"
                        placeholder="Body copy, bullets, or supporting text…"></textarea>

              <div class="artstart-working-row-grid">
                <div class="artstart-working-column">
                  <label class="artstart-muted" for="working-website">Website</label>
                  <input id="working-website" class="artstart-input" type="text"
                         placeholder="e.g., nordson.com/ics">
                </div>
                <div class="artstart-working-column">
                  <label class="artstart-muted" for="working-email">Email</label>
                  <input id="working-email" class="artstart-input" type="email"
                         placeholder="e.g., info@nordson.com">
                </div>
              </div>

              <label class="artstart-muted" for="working-notes">Additional notes / mandatories</label>
              <textarea id="working-notes" class="artstart-textarea"
                        placeholder="Notes, specific phrases, or legal requirements that must appear…"></textarea>

              <div class="artstart-save-row">
                <div id="artstart-save-status" class="artstart-save-status">Autosave ready</div>
              </div>
            </section>

            <section class="artstart-card">
              <h2>Job overview</h2>
              <p><span class="label">Filename:</span> <span id="job-overview-title">—</span></p>
              <p><span class="label">Requested by:</span> <span id="job-overview-requester">—</span></p>
              <p><span class="label">Created:</span> <span id="job-overview-created">—</span></p>
              <p><span class="label">Run / go-live:</span> <span id="job-overview-run">—</span></p>
              <p><span class="label">Materials deadline:</span> <span id="job-overview-deadline">—</span></p>
              <p><span class="label">Editorial notes:</span> <span id="job-overview-topic">—</span></p>
              <p><span class="label">Notes:</span> <span id="job-overview-notes">—</span></p>
            </section>
          </div>
        </div>      
      </main>

      <footer class="artstart-footer-strip">
        <div class="artstart-footer-grid">
          <div>
            <div class="artstart-footer-item-title">File setup (local)</div>
            <div id="status-file-setup" class="artstart-footer-item-body">
              Local files not yet created.
            </div>
          </div>
          <div>
            <div class="artstart-footer-item-title">ArtStart working session</div>
            <div id="status-session" class="artstart-footer-item-body">
              Working session not yet scheduled. Suggested window will appear here.
            </div>
          </div>
          <div>
            <div class="artstart-footer-item-title">Materials delivery</div>
            <div id="status-delivery" class="artstart-footer-item-body">
              Delivery email draft not yet prepared.
            </div>
          </div>
        </div>
      </footer>
    </div>

    <script src="../../assets/ascend.js"></script>
    <script src="./artstart.js"></script>

  </body>
</html>
